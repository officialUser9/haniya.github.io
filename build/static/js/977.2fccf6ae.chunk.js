"use strict";(self.webpackChunkmodernize=self.webpackChunkmodernize||[]).push([[977],{6977:(s,e,t)=>{t.r(e),t.d(e,{default:()=>g});var a=t(9950),n=t(8429),i=t(9246),r=t(2346),o=t(8623),c=t(7233),m=t(7073),l=t(5661),d=t(4139),h=t(9614),u=t(1496),p=t(7535),x=t(5471),A=t(4414);const j=(0,x.A)((0,A.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");var y=t(9928),f=t(2180);t(7705);const g=()=>{const{userId:s}=(0,n.g)(),e=(0,n.Zp)(),[t,x]=(0,a.useState)(!0),[g,v]=(0,a.useState)(null),[P,k]=(0,a.useState)(""),[w,C]=(0,a.useState)([]),[S,b]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{try{const e=await i.A.post("http://134.209.145.149:9999/api/getCPermissions",{user_id:s}),{user_firstname:t,user_lastname:a,permissions:n}=e.data;k("".concat(t," ").concat(a));const r=await i.A.get("http://134.209.145.149:9999/api/menuList"),o=Array.isArray(r.data.data)?r.data.data:[],c=o.map((s=>({name:s.name,hasPermission:n.some((e=>e.menu_name===s.name))})));C(o),b(c)}catch(e){v(e)}finally{x(!1)}})()}),[s]);return t?(0,A.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,A.jsx)(o.A,{})}):g?(0,A.jsxs)(c.A,{children:["Error: ",g.message]}):(0,A.jsxs)(y.A,{children:[(0,A.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",p:3},children:[(0,A.jsx)(m.A,{onClick:()=>e(-1),sx:{mr:2},children:(0,A.jsx)(j,{})}),(0,A.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:P})]}),(0,A.jsxs)(r.A,{sx:{p:3},children:[(0,A.jsxs)(l.A,{elevation:3,sx:{p:2,mb:2},children:[(0,A.jsx)(c.A,{variant:"h5",gutterBottom:!0,children:"Permission List"}),(0,A.jsx)(d.Ay,{container:!0,spacing:2,children:w.map(((s,e)=>{var t;return(0,A.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,A.jsx)(h.A,{control:(0,A.jsx)(u.A,{checked:(null===(t=S[e])||void 0===t?void 0:t.hasPermission)||!1,onChange:()=>(s=>{const e=[...S];e[s].hasPermission=!e[s].hasPermission,b(e)})(e)}),label:s.name})},s.id)}))})]}),(0,A.jsx)(p.A,{variant:"contained",color:"primary",onClick:async()=>{try{const e={user_id:parseInt(s),permissions:S.map((s=>({name:s.name,hasPermission:s.hasPermission})))};await i.A.post("http://134.209.145.149:9999/api/cPermission",e),f.oR.success("Permissions updated successfully!"),setTimeout((()=>{window.location.reload()}),3e3)}catch(e){f.oR.error("Failed to update permissions."),console.error(e)}},sx:{mt:2},children:"Submit"})]}),(0,A.jsx)(f.N9,{})]})}}}]);